(()=>{"use strict";const e="https://cd-static.bamgrid.com",t=(e,t,d)=>Math.min(Math.max(e,t),d),d={selected:"",setIndex:window.setIndex||"0",titleIndex:window.titleIndex||"0",toggleSelected:()=>d.selected=window.selected=!window.selected,updateSetIndex:e=>d.setIndex=window.setIndex=`${e}`,updateTitleIndex:e=>d.titleIndex=window.titleIndex=`${e}`},n="ArrowRight",a="ArrowLeft",i="ArrowDown",l="ArrowUp",s=[n,a,i,l],o=(e,t)=>{const n=document.getElementById(`set-${t}`),a=e?.data?.CuratedSet?.text?.title?.full?.set?.default?.content||"You might like...",i=(e=>{const t=Object.entries(e.data).map((([e,t])=>t.items.map((e=>e))));return t.map((e=>e.map((({image:{tile:e},videoArt:t,text:{title:{full:d}}})=>({imageUrl:e?.[1.78]?.series?e?.[1.78]?.series?.default?.url:e?.[1.78]?.program?.default?.url,title:d?.series?d?.series?.default?.content:d?.program?.default?.content,videoArt:t?.[0]?.mediaMetadata?.urls?.[0]?.url})))))[0]})(e),l=i.map((({title:e,imageUrl:n,videoArt:a},i)=>(({highlighted:e,titleIndex:t,setIndex:d,title:n,imageUrl:a,videoArt:i})=>{const l=document.createElement("div"),s=document.createElement("img"),o=document.createElement("video"),r=document.createElement("source"),c=document.createElement("div");if(c.textContent=n,c.classList.add("titleHeader"),l.className="title",l.id=e?"highlighted":"",l.dataset.titleIndex=t,l.dataset.setIndex=d,l.dataset.videoArt=i,l.dataset.title=n,s.src=a,s.classList.add("image"),i)o.id=i,o.className="video",o.width="200",o.autoplay=!0,o.loop=!0,r.src=i,o.appendChild(r),l.appendChild(o);else{const e=document.createElement("img");e.src=a,e.classList.add("backup-image"),l.appendChild(e)}return l.appendChild(s),l.appendChild(c),l})({highlighted:d.setIndex===`${t}`&&d.titleIndex===`${i}`,titleIndex:i,setIndex:t,title:e,imageUrl:n,videoArt:a})));n.classList.remove("loading");const s=document.createElement("div");s.className="title-row",s.innerText=a,n.insertBefore(s,n.firstChild);const o=document.createElement("div");o.className="clip-container",l.forEach((e=>o.appendChild(e))),n.appendChild(o)};(async()=>{(t=>{const d=(e=>{let t=[];return e?.data?.StandardCollection?.containers.map((e=>{e?.set?.refId&&t.push(e.set.refId)})),t})(t),n=document.createElement("video");n.id="player",document.getElementById("root").appendChild(n),d.forEach(((e,t)=>{const d=document.createElement("div");d.id=`set-${t}`,d.classList.add("row"),d.classList.add("loading"),document.getElementById("root").appendChild(d)})),Promise.all(d.map((async(t,d)=>(async t=>{const d=await fetch(`${e}/dp-117731241344/sets/${t}.json`);return await d.json()})(t).then((e=>o(e,d))))))})(await(async()=>{const t=await fetch(`${e}/dp-117731241344/home.json`);return await t.json()})()),document.addEventListener("keydown",(({key:e,...o})=>{if(s.includes(e)){const s=Number(d.titleIndex),r=Number(d.setIndex);return e===n?d.updateTitleIndex(t(s+1,0,10)):e===a?d.updateTitleIndex(t(s-1,0,10)):e===i?d.updateSetIndex(t(r+1,0,10)):e===l&&d.updateSetIndex(t(r-1,0,10)),((e,t)=>{const d=document.getElementById("highlighted"),n=d.querySelector("video");d.removeAttribute("id");const a=document.querySelector(`[data-set-index='${e}'][data-title-index='${t}']`);a.id="highlighted",a?.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}),n.play()})(d.setIndex,d.titleIndex),o?.preventDefault(),!1}if(" "===e){const e=Number(d.titleIndex),t=Number(d.setIndex);d.toggleSelected(),d.selected?((e,t)=>{const d=document.querySelector(`[data-set-index='${e}'][data-title-index='${t}']`),n=d.dataset?.videoArt,a=document.getElementById("player"),i=document.createElement("source");i.src=n,a.appendChild(i),a.style.zIndex="1",a.play()})(t,e):(()=>{const e=document.getElementById("player"),t=document.getElementById("root");t.removeChild(e);const d=document.createElement("video");d.id="player",t.appendChild(d)})()}}))})()})();